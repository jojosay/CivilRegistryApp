<UserControl x:Class="CivilRegistryApp.Modules.Reports.Views.ScheduledReportsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:CivilRegistryApp.Modules.Reports.Views"
             mc:Ignorable="d"
             d:DesignHeight="450" d:DesignWidth="700"
             Background="{StaticResource PrimaryBrush}">
    <Grid Margin="10" Background="{StaticResource PrimaryBrush}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,10">
            <TextBlock Text="Scheduled Reports" FontSize="16" FontWeight="Bold" VerticalAlignment="Center" Foreground="White"/>
            <Button x:Name="RefreshButton" Content="Refresh" Width="90" Height="25" Padding="10,3" Margin="20,0,0,0" Background="#2E3A59" Foreground="White" Click="RefreshButton_Click"/>
        </StackPanel>

        <!-- Scheduled Reports List -->
        <DataGrid Grid.Row="1" x:Name="ScheduledReportsDataGrid" AutoGenerateColumns="False"
                  IsReadOnly="True" SelectionMode="Single" SelectionChanged="ScheduledReportsDataGrid_SelectionChanged"
                  CanUserAddRows="False" CanUserDeleteRows="False" CanUserReorderColumns="True"
                  CanUserResizeRows="False" CanUserSortColumns="True" AlternatingRowBackground="{StaticResource PrimaryDarkBrush}">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Name" Binding="{Binding Name}" Width="*"/>
                <DataGridTextColumn Header="Report Type" Binding="{Binding ReportType}" Width="100"/>
                <DataGridTextColumn Header="Format" Binding="{Binding ExportFormat}" Width="80"/>
                <DataGridTextColumn Header="Schedule" Binding="{Binding Schedule}" Width="120"/>
                <DataGridTextColumn Header="Last Run" Binding="{Binding LastRunAt, StringFormat=\{0:yyyy-MM-dd HH:mm\}}" Width="120"/>
                <DataGridCheckBoxColumn Header="Active" Binding="{Binding IsActive}" Width="60"/>
                <DataGridTextColumn Header="Created By" Binding="{Binding CreatedByUser.Username}" Width="100"/>
            </DataGrid.Columns>
        </DataGrid>

        <!-- Buttons -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0">
            <Button x:Name="RunNowButton" Content="Run Now" Width="90" Height="30" Padding="10,5" Margin="0,0,10,0" Background="#2E3A59" Foreground="White" Click="RunNowButton_Click" IsEnabled="False"/>
            <Button x:Name="EditButton" Content="Edit" Width="90" Height="30" Padding="10,5" Margin="0,0,10,0" Background="#2E3A59" Foreground="White" Click="EditButton_Click" IsEnabled="False"/>
            <Button x:Name="ToggleActiveButton" Content="Toggle Active" Width="100" Height="30" Padding="10,5" Margin="0,0,10,0" Background="#2E3A59" Foreground="White" Click="ToggleActiveButton_Click" IsEnabled="False"/>
            <Button x:Name="DeleteButton" Content="Delete" Width="90" Height="30" Padding="10,5" Background="#2E3A59" Foreground="White" Click="DeleteButton_Click" IsEnabled="False"/>
        </StackPanel>
    </Grid>
</UserControl>
